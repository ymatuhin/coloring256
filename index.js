!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,r||t,i),l=o?o+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},a.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,i,s){var l=o?o+t:t;if(!this._events[l])return!1;var a,c,h=this._events[l],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,i),!0;case 6:return h.fn.call(h.context,e,n,r,i,s),!0}for(c=1,a=new Array(u-1);c<u;c++)a[c-1]=arguments[c];h.fn.apply(h.context,a)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!a)for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];h[c].fn.apply(h[c].context,a)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return l(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||l(this,i);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[i]=1===c.length?c[0]:c:l(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=o,a.EventEmitter=a,t.exports=a},function(t,e,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),l=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,c=0,h=[],u=n(16);function d(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(x(r.parts[s],e))}else{var l=[];for(s=0;s<r.parts.length;s++)l.push(x(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:l}}}}function f(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(l):n.push(r[s]={id:s,parts:[l]})}return n}function p(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function m(t){var e=document.createElement("style");return t.attrs.type="text/css",g(e,t.attrs),p(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function x(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=c++;n=a||(a=m(e)),r=y.bind(null,n,s,!1),o=y.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(s),l&&URL.revokeObjectURL(l)}.bind(null,n,e),o=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){v(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return d(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(l=i[s.id]).refs--,r.push(l)}t&&d(f(t,e),e);for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var a=0;a<l.parts.length;a++)l.parts[a]();delete i[l.id]}}}};var w,b=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function y(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){const r=n(13);t.exports=function(t){if("function"!=typeof t&&!r(t))throw new Error("Argument must be a function or Promise");return r(t)?t.then(function(t){return[null,t]},function(t){return[t,null]}):function(t){try{return[null,t()]}catch(t){return[t,null]}}(t)}},function(t,e,n){"use strict";n.r(e);n(18);const r=".js-coloring",o="data-image",i=9;n(15);var s=n(3),l=n.n(s);const a=t=>new Promise((e,n)=>{var r=new window.XMLHttpRequest;r.open("GET",t,!0),r.onload=(()=>{if(r.status>=200&&r.status<400)return e(r.responseText);n(new Error(`HTTP: Failed to download ${t}`))}),r.onerror=(()=>{n(new Error(`HTTP: Failed to download ${t}`))}),r.send()});var c=n(0),h=n.n(c);class u extends h.a{constructor(t,e){if(super(),!t)throw new Error("ColoringArea: $root element must be provided");if(!e)throw new Error("ColoringArea: imageUrl must be provided");this.$root=t,this.imageUrl=e,this.originalImage=null,this.init()}async init(){this.$root.classList.add("coloring-area");const[t,e]=await l()(this.loadImage());if(t)return this.emit("error",t);this.$root.innerHTML=e,this.emit("ready"),this.$root.addEventListener("click",this.onClick.bind(this),!1)}async loadImage(){const t=a(this.imageUrl);return this.originalImage=t,t}onClick({target:t}){const e=t.getAttribute("fill");!e||e<"#aaa"||this.emit("click",t)}fillTarget(t,e){t.style.fill=e}reset(){this.innerHTML=this.originalImage}}n(12);class d{constructor(t){this.color=t}toString(){const{h:t,s:e,l:n}=this.color;return`hsl(${t}, ${e}%, ${n}%)`}}n(10);class f extends h.a{constructor(t,e){if(super(),!t)throw new Error("Cell: $root element must be provided");if(!e)throw new Error("Cell: color must be provided");this.$root=t,this.color=e,this.activeClass="active",this.init()}init(){this.$root.classList.add("color-cell"),this.$root.addEventListener("click",()=>this.emit("click",this.color)),this.setColor(this.color)}setColor(t){this.color=t,this.$root.style.backgroundColor=t}activate(){this.$root.classList.add(this.activeClass)}deactivate(){this.$root.classList.remove(this.activeClass)}}class p extends h.a{constructor(t,e){if(super(),!t)throw new Error("PrimaryColors: $root element must be provided");this.$root=t,this.activeColor=e,this.colors=[new d({h:0,s:100,l:50}),new d({h:30,s:100,l:50}),new d({h:60,s:100,l:50}),new d({h:120,s:100,l:50}),new d({h:180,s:100,l:50}),new d({h:210,s:100,l:50}),new d({h:240,s:100,l:50}),new d({h:270,s:100,l:50}),new d({h:300,s:100,l:50}),new d({h:330,s:100,l:50})],this.cells=this.createCells(),this.init()}init(){this.$root.classList.add("primary-colors"),this.cells.forEach(t=>t.on("click",this.onCellClick.bind(this))),this.updateActive()}createCells(){return this.colors.slice(0).map(t=>{const e=document.createElement("div");return this.$root.appendChild(e),new f(e,t)})}onCellClick(t){this.emit("changeColor",t),this.activeColor=t,this.updateActive()}updateActive(){const t=this.activeColor.toString();this.cells.forEach(e=>{e.color.toString()===t?e.activate():e.deactivate()})}}n(8);class v extends h.a{constructor(t,e){if(super(),!t)throw new Error("ShadesColors: $root element must be provided");this.$root=t,this.activeColor=e,this.colors=this.createColors(),this.cells=this.createCells(),this.init()}init(){this.$root.classList.add("shades-colors"),this.cells.forEach(t=>t.on("click",this.onCellClick.bind(this))),this.updateActive()}createColors(){const{h:t,s:e,l:n}=this.activeColor.color,r=100/i-1;return Array.from(Array(i)).map((n,o)=>new d({h:t,s:e,l:(o+1)*r}))}createCells(){return this.colors.slice(0).map(t=>{const e=document.createElement("div");return this.$root.appendChild(e),new f(e,t)})}changeActiveColor(t){this.activeColor=t,this.updateActive(),this.updateColors()}onCellClick(t){this.emit("changeColor",t),this.activeColor=t,this.updateActive()}updateActive(){const t=this.activeColor.toString();this.cells.forEach(e=>{e.color.toString()===t?e.activate():e.deactivate()})}updateColors(){const t=this.createColors();t.forEach((e,n)=>{this.cells[n].setColor(t[n])})}}n(6);const m='<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h48v48h-48z" fill="none"/><path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4h-10v10zm24 14h-6v4h10v-10h-4v6zm-6-24v4h6v6h4v-10h-10z"/></svg>',g='<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h48v48h-48z" fill="none"/><path d="M10 32h6v6h4v-10h-10v4zm6-16h-6v4h10v-10h-4v6zm12 22h4v-6h6v-4h-10v10zm4-22v-6h-4v10h10v-4h-6z"/></svg>';class x extends h.a{constructor(t){if(super(),!t)throw new Error("Fullscreen: $root element must be provided");this.$root=t,this.isFull=!1,this.init()}init(){this.$root.classList.add("fullscreen"),this.$root.innerHTML=m,this.$root.addEventListener("click",this.onClick.bind(this),!1)}onClick(){this.isFull=!this.isFull,this.emit("toggle",this.isFull),this.isFull?this.$root.innerHTML=g:this.$root.innerHTML=m}}new class{constructor(){if(this.color=new d({h:0,s:100,l:50}),this.coloringArea=null,this.primmaryColors=null,this.fullscreen=null,this.$root=document.querySelector(r),!this.$root)throw new Error(`App: can't find root element (${r})`);if(this.imageUrl=this.$root.getAttribute(o),!this.imageUrl)throw new Error("Image url must be provided by [data-image]");this.init()}init(){this.$root.innerHTML='<span class="loading-text">Loading...</span>',this.$root.classList.add("loading"),this.$root.classList.add("coloring-root"),this.createArea()}createArea(){const t=document.createElement("div");this.coloringArea=new u(t,this.imageUrl),this.coloringArea.on("ready",this.onAreaReady.bind(this,t)),this.coloringArea.on("error",this.onAreaError.bind(this)),this.coloringArea.on("click",this.onAreaClick.bind(this))}createPrimaryColors(){const t=document.createElement("div");this.primmaryColors=new p(t,this.color),this.primmaryColors.on("changeColor",t=>{this.color=t,this.shadesColors.changeActiveColor(t)}),this.$root.appendChild(t)}createShadeColors(){const t=document.createElement("div");this.shadesColors=new v(t,this.color),this.shadesColors.on("changeColor",t=>this.color=t),this.$root.appendChild(t)}createFullButton(){const t=document.createElement("button");t.setAttribute("type","button"),this.fullscreen=new x(t),this.fullscreen.on("toggle",this.toggleFullScreen.bind(this)),this.$root.appendChild(t)}onAreaReady(t){this.$root.innerHTML="",this.$root.classList.remove("loading"),this.$root.appendChild(t),this.createShadeColors(),this.createPrimaryColors(),this.createFullButton()}onAreaError(t){this.$root.innerHTML=`<span class="error-text">${t}</span>`}onAreaClick(t){this.coloringArea.fillTarget(t,this.color.toString())}toggleFullScreen(t){var e;t?(e=this.$root).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen():(this.$root,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),this.$root.classList[t?"add":"remove"]("coloring-root__fullscreen")}}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".fullscreen {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: transparent;\n  cursor: pointer; }\n",""])},function(t,e,n){var r=n(5);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".shades-colors {\n  display: flex;\n  flex-shrink: 0;\n  justify-content: center;\n  padding-right: 5px;\n  padding-left: 5px; }\n  .shades-colors:before, .shades-colors:after {\n    flex: 0.5;\n    margin: 5px 2.5px;\n    min-width: 14px;\n    min-height: 14px;\n    max-width: 30px;\n    content: ''; }\n    @media (max-width: 780px) {\n      .shades-colors:before, .shades-colors:after {\n        margin: 2px 1px;\n        margin-bottom: 0; } }\n    .shades-colors:before:after, .shades-colors:after:after {\n      display: block;\n      padding-bottom: 100%;\n      content: ''; }\n  @media (max-width: 780px) {\n    .shades-colors {\n      padding-right: 2px;\n      padding-bottom: 2px;\n      padding-left: 2px; } }\n  .shades-colors > .color-cell {\n    flex: 1;\n    margin: 5px;\n    margin-bottom: 0; }\n    @media (max-width: 780px) {\n      .shades-colors > .color-cell {\n        margin: 2px;\n        margin-bottom: 0; } }\n",""])},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".color-cell {\n  display: block;\n  min-width: 28px;\n  min-height: 28px;\n  max-width: 60px;\n  border-radius: 50%;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.25);\n  cursor: pointer; }\n  .color-cell.active {\n    box-shadow: inset 0 0 10px 2px rgba(0, 0, 0, 0.5); }\n  .color-cell:after {\n    display: block;\n    padding-bottom: 100%;\n    content: ''; }\n",""])},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".primary-colors {\n  display: flex;\n  flex-shrink: 0;\n  justify-content: center;\n  padding-right: 5px;\n  padding-bottom: 5px;\n  padding-left: 5px; }\n  @media (max-width: 780px) {\n    .primary-colors {\n      padding-right: 2px;\n      padding-bottom: 2px;\n      padding-left: 2px; } }\n  .primary-colors > .color-cell {\n    flex: 1;\n    margin: 5px; }\n    @media (max-width: 780px) {\n      .primary-colors > .color-cell {\n        margin: 2px; } }\n",""])},function(t,e,n){var r=n(11);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".coloring-area {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  padding: 10px; }\n  .coloring-area svg {\n    max-width: 100%;\n    max-height: 100%;\n    height: auto; }\n",""])},function(t,e,n){var r=n(14);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".coloring-root {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  min-height: 480px;\n  max-width: 100%;\n  max-height: 100vh;\n  background: #fff; }\n  .coloring-root__fullscreen {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0; }\n",""])},function(t,e,n){var r=n(17);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)}]);