!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,r||t,i),a=o?o+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,s){var a=o?o+t:t;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,i),!0;case 6:return h.fn.call(h.context,e,n,r,i,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var f,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,n);break;case 4:h[l].fn.call(h[l].context,e,n,r);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];h[l].fn.apply(h[l].context,c)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||a(this,i);else{for(var c=0,l=[],h=s.length;c<h;c++)(s[c].fn!==e||r&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,l=0,h=[],u=n(14);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function d(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function m(t){var e=document.createElement("style");return t.attrs.type="text/css",g(e,t.attrs),d(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=l++;n=c||(c=m(e)),r=b.bind(null,n,s,!1),o=b.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",g(e,t.attrs),d(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){v(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return f(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}t&&f(p(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var x,w=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function b(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){const r=n(11);t.exports=function(t){if("function"!=typeof t&&!r(t))throw new Error("Argument must be a function or Promise");return r(t)?t.then(function(t){return[null,t]},function(t){return[t,null]}):function(t){try{return[null,t()]}catch(t){return[t,null]}}(t)}},function(t,e,n){"use strict";n.r(e);n(16);const r=".js-coloring",o="data-image",i=9;n(13);var s=n(3),a=n.n(s);const c=t=>new Promise((e,n)=>{var r=new window.XMLHttpRequest;r.open("GET",t,!0),r.onload=(()=>{if(r.status>=200&&r.status<400)return e(r.responseText);n(new Error(`HTTP: Failed to download ${t}`))}),r.onerror=(()=>{n(new Error(`HTTP: Failed to download ${t}`))}),r.send()});var l=n(0),h=n.n(l);class u extends h.a{constructor(t,e){if(super(),!t)throw new Error("ColoringArea: $root element must be provided");if(!e)throw new Error("ColoringArea: imageUrl must be provided");this.$root=t,this.imageUrl=e,this.originalImage=null,this.init()}async init(){this.$root.classList.add("coloring-area"),this.$root.innerHTML=await this.loadImage(),this.emit("ready"),this.$root.addEventListener("click",this.onClick.bind(this),!1)}async loadImage(){const t=c(this.imageUrl),[e,n]=await a()(t);return e?this.emit("error",e):(this.originalImage=n,n)}onClick({target:t}){const e=t.getAttribute("fill");!e||e<"#aaa"||this.emit("click",t)}fillTarget(t,e){t.style.fill=e}reset(){this.innerHTML=this.originalImage}}n(10);class f{constructor(t){this.color=t}toString(){const{h:t,s:e,l:n}=this.color;return`hsl(${t}, ${e}%, ${n}%)`}}n(8);class p extends h.a{constructor(t,e){if(super(),!t)throw new Error("Cell: $root element must be provided");if(!e)throw new Error("Cell: color must be provided");this.$root=t,this.color=e,this.activeClass="active",this.init()}init(){this.$root.classList.add("color-cell"),this.$root.addEventListener("click",()=>this.emit("click",this.color)),this.setColor(this.color)}setColor(t){this.color=t,this.$root.style.backgroundColor=t}activate(){this.$root.classList.add(this.activeClass)}deactivate(){this.$root.classList.remove(this.activeClass)}}class d extends h.a{constructor(t,e){if(super(),!t)throw new Error("PrimaryColors: $root element must be provided");this.$root=t,this.activeColor=e,this.colors=[new f({h:0,s:100,l:50}),new f({h:30,s:100,l:50}),new f({h:60,s:100,l:50}),new f({h:120,s:100,l:50}),new f({h:180,s:100,l:50}),new f({h:210,s:100,l:50}),new f({h:240,s:100,l:50}),new f({h:270,s:100,l:50}),new f({h:300,s:100,l:50}),new f({h:330,s:100,l:50})],this.cells=this.createCells(),this.init()}init(){this.$root.classList.add("primary-colors"),this.cells.forEach(t=>t.on("click",this.onCellClick.bind(this))),this.updateActive()}createCells(){return this.colors.slice(0).map(t=>{const e=document.createElement("div");return this.$root.appendChild(e),new p(e,t)})}onCellClick(t){this.emit("changeColor",t),this.activeColor=t,this.updateActive()}updateActive(){const t=this.activeColor.toString();this.cells.forEach(e=>{e.color.toString()===t?e.activate():e.deactivate()})}}n(6);class v extends h.a{constructor(t,e){if(super(),!t)throw new Error("ShadesColors: $root element must be provided");this.$root=t,this.activeColor=e,this.colors=this.createColors(),this.cells=this.createCells(),this.init()}init(){this.$root.classList.add("shades-colors"),this.cells.forEach(t=>t.on("click",this.onCellClick.bind(this))),this.updateActive()}createColors(){const{h:t,s:e,l:n}=this.activeColor.color,r=100/i-1;return Array.from(Array(i)).map((n,o)=>new f({h:t,s:e,l:(o+1)*r}))}createCells(){return this.colors.slice(0).map(t=>{const e=document.createElement("div");return this.$root.appendChild(e),new p(e,t)})}changeActiveColor(t){this.activeColor=t,this.updateActive(),this.updateColors()}onCellClick(t){this.emit("changeColor",t),this.activeColor=t,this.updateActive()}updateActive(){const t=this.activeColor.toString();this.cells.forEach(e=>{e.color.toString()===t?e.activate():e.deactivate()})}updateColors(){const t=this.createColors();t.forEach((e,n)=>{this.cells[n].setColor(t[n])})}}console.info("# new App()",new class{constructor(){if(this.color=new f({h:0,s:100,l:50}),this.coloringArea=null,this.primmaryColors=null,this.$root=document.querySelector(r),!this.$root)throw new Error(`App: can't find root element (${r})`);if(this.imageUrl=this.$root.getAttribute(o),!this.imageUrl)throw new Error("Image url must be provided by [data-image]");this.init()}init(){this.$root.innerHTML='<span class="loading-text">Loading...</span>',this.$root.classList.add("loading"),this.$root.classList.add("coloring-root"),this.createArea()}createArea(){const t=document.createElement("div");this.coloringArea=new u(t,this.imageUrl),this.coloringArea.on("ready",this.onAreaReady.bind(this,t)),this.coloringArea.on("error",this.onAreaError.bind(this)),this.coloringArea.on("click",this.onAreaClick.bind(this))}createPrimaryColors(){const t=document.createElement("div");this.primmaryColors=new d(t,this.color),this.primmaryColors.on("changeColor",t=>{this.color=t,this.shadesColors.changeActiveColor(t)}),this.$root.appendChild(t)}createShadeColors(){const t=document.createElement("div");this.shadesColors=new v(t,this.color),this.shadesColors.on("changeColor",t=>this.color=t),this.$root.appendChild(t)}onAreaReady(t){this.$root.innerHTML="",this.$root.classList.remove("loading"),this.$root.appendChild(t),this.createShadeColors(),this.createPrimaryColors()}onAreaError(t){this.$root.innerHTML=`<span class="error-text">${t}</span>`}onAreaClick(t){this.coloringArea.fillTarget(t,this.color.toString())}})},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".shades-colors {\n  display: flex;\n  justify-content: center;\n  padding-right: 5px;\n  padding-left: 5px; }\n  @media (max-width: 780px) {\n    .shades-colors {\n      padding-right: 2px;\n      padding-bottom: 2px;\n      padding-left: 2px; } }\n  .shades-colors > .color-cell {\n    flex: 1;\n    margin: 5px;\n    margin-bottom: 0; }\n    @media (max-width: 780px) {\n      .shades-colors > .color-cell {\n        margin: 2px;\n        margin-bottom: 0; } }\n",""])},function(t,e,n){var r=n(5);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".color-cell {\n  display: block;\n  min-width: 28px;\n  min-height: 28px;\n  max-width: 60px;\n  border-radius: 50%;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.25);\n  cursor: pointer; }\n  .color-cell.active {\n    box-shadow: inset 0 0 10px 2px rgba(0, 0, 0, 0.5); }\n  .color-cell:after {\n    display: block;\n    padding-bottom: 100%;\n    content: ''; }\n",""])},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".primary-colors {\n  display: flex;\n  justify-content: center;\n  padding-right: 5px;\n  padding-bottom: 5px;\n  padding-left: 5px; }\n  @media (max-width: 780px) {\n    .primary-colors {\n      padding-right: 2px;\n      padding-bottom: 2px;\n      padding-left: 2px; } }\n  .primary-colors > .color-cell {\n    flex: 1;\n    margin: 5px; }\n    @media (max-width: 780px) {\n      .primary-colors > .color-cell {\n        margin: 2px; } }\n",""])},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".coloring-area {\n  display: flex;\n  overflow: hidden;\n  align-items: center;\n  flex: 1;\n  justify-content: center;\n  padding: 10px; }\n  .coloring-area svg {\n    max-width: 100%;\n    max-height: 100%; }\n",""])},function(t,e,n){var r=n(12);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,".coloring-root {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  max-height: 500px;\n  max-height: 100vh;\n  height: 100vh;\n  background: #fff; }\n",""])},function(t,e,n){var r=n(15);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,o);r.locals&&(t.exports=r.locals)}]);